import{g as t}from"./p-9835b40a.js";import{c as e}from"./p-8102a7fd.js";function n(t){let e=this;Object.keys(t).forEach((function(n){e[n]=t[n]}))}function o(t,e){try{let n=this;if(n.rootModel){let o=t;return n.parentChain&&(o=`${n.parentChain}.${t}`),n.rootModel.setChainValue(o,e),!0}return!1}catch(n){console.error(n)}return!1}function l(e,n){if(e||!n)return;let o,l,i,r=this,a=t(r);if(null!==a.getAttribute("data-view-model")&&"psk-for-each"===a.tagName.toLowerCase())return o=a.getAttribute("data-view-model"),r.__assignProperties.call(r,{rootModel:n,parentChain:i=o}),void r.render.call(r);if(o=a.getAttribute("view-model"),i=o,null===o&&(null===(l=a.getAttribute("name"))&&null!==a.getAttribute("label")&&(l=a.getAttribute("label").replace(/( |:|\/|\.|-)/g,"").toLowerCase()),i=l),o||l){if(r.__assignProperties.call(r,{rootModel:n,parentChain:i}),o){let t=n.getChainValue(i);if(!t)return;return Object.keys(t).forEach(t=>{c(t,`${i}.${t}`)}),void u()}for(let t=0;t<a.attributes.length;++t){const e=a.attributes[t];if(e.value.startsWith("@")){const t=e.value.split("@")[1];c(t,i?`${i}.${t}`:t)}}u()}function c(t,e){r[t]=n.getChainValue(e),n.onChange(e,(function(){r[t]=n.getChainValue(e)}))}function u(){const t=`${i}.value`;n.getChainValue(i)&&!n.getChainValue(t)&&c("value",t)}}function i(){return function(i){let{componentWillLoad:r,render:a}=i;i.componentWillLoad=function(){let i=t(this);return this.render=a,this.changeModel=o,this.__assignProperties=n,e("getModelEvent",{bubbles:!0,composed:!0,cancellable:!0,detail:{callback:l.bind(this)}},!0,i),r&&r.call(this)}}}export{i as B};